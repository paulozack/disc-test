<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Resultado - Teste DISC</title>
  <!-- Importando Chart.js via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f9fc;
      margin: 0; 
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    h1 {
      color: #0056b3;
      text-align: center;
    }
    .resultado-item {
      font-size: 18px;
      margin: 10px 0;
    }
    .high {
      color: #006600; /* verde */
    }
    .low {
      color: #cc0000; /* vermelho */
    }
    /* Para centralizar o canvas */
    .chart-container {
      width: 100%;
      max-width: 500px;
      margin: 30px auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Resultado do Teste DISC</h1>

    <!-- Exibição numérica -->
    <div id="resultado"></div>

    <!-- Gráfico de Barras -->
    <div class="chart-container">
      <canvas id="myChart"></canvas>
    </div>
  </div>

  <script>
    // ---------------------
    // 1) Ler parâmetros D, I, S, C da URL
    // ---------------------
    const params = new URLSearchParams(window.location.search);
    const d = parseInt(params.get('d'), 10) || 0;
    const i = parseInt(params.get('i'), 10) || 0;
    const s = parseInt(params.get('s'), 10) || 0;
    const c = parseInt(params.get('c'), 10) || 0;

    // ---------------------
    // 2) Exibir valores D, I, S, C em texto
    // ---------------------
    const resultadoDiv = document.getElementById("resultado");

    function formatValue(value) {
      // Se for >= 0 exibe em verde, senão em vermelho
      if (value >= 0) {
        return `<span class="high">+${value}</span>`;
      } else {
        return `<span class="low">${value}</span>`;
      }
    }

    resultadoDiv.innerHTML = `
      <p class="resultado-item"><strong>D (Dominância):</strong> ${formatValue(d)}</p>
      <p class="resultado-item"><strong>I (Influência):</strong> ${formatValue(i)}</p>
      <p class="resultado-item"><strong>S (Estabilidade):</strong> ${formatValue(s)}</p>
      <p class="resultado-item"><strong>C (Conformidade):</strong> ${formatValue(c)}</p>
    `;

    // ---------------------
    // 3) Construir o gráfico de barras com Chart.js
    // ---------------------
const ctx = document.getElementById('myChart').getContext('2d');

const dataDISC = {
    labels: ['D', 'I', 'S', 'C'],
    valores: [65, 80, 15, 50] // Substitua pelos seus valores
};

new Chart(ctx, {
    data: {
        datasets: [{
            type: 'bar',
            label: 'Resultado DISC',
            data: dataDISC.valores.map((value, index) => ({ x: dataDISC.labels[index], y: value })), // Formata os dados para o gráfico de barras
            backgroundColor: [
                'rgba(255, 99, 132, 0.7)', // D (Vermelho)
                'rgba(255, 205, 86, 0.7)', // I (Amarelo)
                'rgba(75, 192, 192, 0.7)', // S (Verde)
                'rgba(54, 162, 235, 0.7)'  // C (Azul)
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(255, 205, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(54, 162, 235, 1)'
            ],
            borderWidth: 1,
            barPercentage: 0.5, // Ajusta a largura das barras
            categoryPercentage: 0.8 // Ajusta o espaçamento entre as barras
        }, {
            type: 'line', // Linhas conectando os pontos
            label: 'Conexão',
            data: dataDISC.valores.map((value, index) => ({ x: dataDISC.labels[index], y: value })), // Formata os dados para o gráfico de linha
            borderColor: 'black',
            borderWidth: 2,
            fill: false,
            pointRadius: 5, // Tamanho dos pontos
            pointBackgroundColor: 'black'
        }]
    },
    options: {
        responsive: true,
        scales: {
            x: {
                grid: {
                    display: false
                }
            },
            y: {
                beginAtZero: true,
                max: 100, // Ajuste conforme necessário
                grid: {
                    display: false
                }
            }
        },
        plugins: {
            legend: {
                display: false // Esconde a legenda, se necessário
            }
        }
    }
});
  </script>
</body>
</html>
